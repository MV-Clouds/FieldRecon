<template>
    <div class="main-controls slds-grid">
        <div class="control-buttons slds-grid slds-wrap slds-gutters_xx-small">
            <button class="only-icon-button slds-col slds-m-bottom_xx-small control-btn record-button" data-action="recording" onclick={controlRecording} disabled={controlBtnDisabled.recording}>
                <svg viewBox="0 0 24 24" ><path d="M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM10.6219 8.41459L15.5008 11.6672C15.6846 11.7897 15.7343 12.0381 15.6117 12.2219C15.5824 12.2658 15.5447 12.3035 15.5008 12.3328L10.6219 15.5854C10.4381 15.708 10.1897 15.6583 10.0672 15.4745C10.0234 15.4088 10 15.3316 10 15.2526V8.74741C10 8.52649 10.1791 8.34741 10.4 8.34741C10.479 8.34741 10.5562 8.37078 10.6219 8.41459Z"></path></svg>
            </button>
            <button class="only-icon-button slds-col slds-m-bottom_xx-small control-btn pause-button" data-action="paused" onclick={controlRecording} disabled={controlBtnDisabled.paused}>
                <svg viewBox="0 0 24 24" ><path d="M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM9 9H11V15H9V9ZM13 9H15V15H13V9Z"></path></svg>
            </button>
            <button class="only-icon-button slds-col slds-m-bottom_xx-small control-btn stop-button" data-action="inactive" onclick={controlRecording} disabled={controlBtnDisabled.inactive}>
                <svg viewBox="0 0 24 24" ><path d="M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM9 9H15V15H9V9Z"></path></svg>
            </button>
            <div if:false={_hideUpload} class="slds-col slds-m-bottom_xx-small">
                <label for="fileUploader">
                    <button class="slds-col control-btn upload-button" onclick={clickFileInput} disabled={controlBtnDisabled.disabled}>
                        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M15 4H5V20H19V8H15V4ZM3 2.9918C3 2.44405 3.44749 2 3.9985 2H16L20.9997 7L21 20.9925C21 21.5489 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5447 3 21.0082V2.9918ZM13 12V16H11V12H8L12 8L16 12H13Z"></path></svg>
                        Upload Audio File
                    </button>
                </label>
                <input style="display:none" type="file" class="slds-col" id="fileUploader" data-name="fileUploader" accept="audio/*" onchange={handleFileUpload} disabled={controlBtnDisabled.disabled}></lightning-file-upload>
            </div>
        </div>
        <div class="slds-grow"></div>
        <!-- Show Only when _hideClip is true -->
        <lightning-button lwc:if={_hideClip} class="only-icon-button slds-m-left_x-small" label="" variant="brand-outline" icon-name="utility:refresh" onclick={refreshRecording} disabled={controlBtnDisabled.disabled}></lightning-button>
    </div>

    <p lwc:if={infoMessage} class="slds-m-vertical_x-small slds-text-title_caps">{infoMessage} </p>
    
    <div class="slds-grid slds-grid_vertical-align-center">
        <!-- <p data-id={clip.id} class="slds-m-right_x-small">{clip.name}:</p> -->
        <div lwc:if={showClip} class="slds-grid slds-wrap  slds-m-bottom_x-small">
            <audio class="output-audio" controls src={clip.url}></audio>
            <button class="only-icon-button slds-m-left_x-small control-btn refresh-button" onclick={refreshRecording} disabled={controlBtnDisabled.disabled}>
                <svg viewBox="0 0 24 24"><path d="M2 12C2 17.5228 6.47715 22 12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2V4C16.4183 4 20 7.58172 20 12C20 16.4183 16.4183 20 12 20C7.58172 20 4 16.4183 4 12C4 9.25022 5.38734 6.82447 7.50024 5.38451L7.5 8H9.5V2L3.5 2V4L5.99918 3.99989C3.57075 5.82434 2 8.72873 2 12Z"></path></svg>
            </button>
            <button if:false={_hideSave} class="only-icon-button slds-m-left_x-small control-btn save-button" onclick={saveClip} disabled={controlBtnDisabled.disabled}>
                <svg viewBox="0 0 24 24"><path d="M5 5V19H19V7.82843L16.1716 5H5ZM4 3H17L20.7071 6.70711C20.8946 6.89464 21 7.149 21 7.41421V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3ZM12 18C10.3431 18 9 16.6569 9 15C9 13.3431 10.3431 12 12 12C13.6569 12 15 13.3431 15 15C15 16.6569 13.6569 18 12 18ZM6 6H15V10H6V6Z"></path></svg>
            </button>
        </div>
        <canvas if:false={_hideVisualizer} data-display={showVisualize} class="visualizer  slds-m-bottom_x-small"></canvas>
    </div>
</template>