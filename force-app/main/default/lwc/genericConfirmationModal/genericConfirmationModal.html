<template>
    <template if:true={isModalVisible}>
        <!-- Modal -->
        <section 
            role="dialog" 
            tabindex="-1" 
            aria-labelledby="modal-heading" 
            aria-modal="true" 
            aria-describedby="modal-content" 
            class={modalClass}
            onkeydown={handleKeyDown}>
            
            <div class="slds-modal__container">
                <!-- Close Button -->
                <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse close-button" title="Close" onclick={handleCancel}>
                    <lightning-icon icon-name="utility:close" alternative-text="Close" class="close-icon" size="small"></lightning-icon>
                </button>

                <!-- Modal Header -->
                <div class="pop-heading" id="modal-heading">
                    {title}
                </div>

                <!-- Modal Body -->
                <div class="slds-modal__content pop-up" id="modal-content">
                    <div class="popUpBody">
                        <div class="modal-message">
                            <lightning-formatted-rich-text value={message}></lightning-formatted-rich-text>
                        </div>
                    </div>
                </div>

                <!-- Modal Footer -->
                <div class="popUpFooter">
                    <button 
                        class={confirmButtonClass}
                        onclick={handleConfirm}
                        disabled={isProcessing}>
                        <template if:true={isProcessing}>
                            <lightning-spinner 
                                alternative-text="Processing" 
                                size="small" 
                                class="button-spinner">
                            </lightning-spinner>
                        </template>
                        {confirmButtonLabel}
                    </button>
                </div>
            </div>
        </section>

        <!-- Backdrop -->
        <div class="slds-backdrop slds-backdrop_open" onclick={handleBackdropClick}></div>
    </template>
</template>