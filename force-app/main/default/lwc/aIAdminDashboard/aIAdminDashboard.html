<template>
    <template if:true={isLoading}>
        <div class="spinner-container">
            <lightning-spinner alternative-text="Loading..." size="medium"></lightning-spinner>
        </div>
    </template>
    
    <div class="aad-main-section">
        <div class="wrapper" lwc:if={hasError}>
            <div class="no-prop">
                <div class="empty-state">
                    <div class="empty-state__content">
                        <div class="empty-state__icon">
                            <img src="/resource/wfrecon__emptyState" alt="" draggable="false">
                        </div>
                        <div class="empty-state__message">Access Denied</div>
                        <div class="empty-state__subtitle">{errorMessage}</div>
                    </div>
                </div>
            </div>
        </div>
        <template lwc:else>
            <div class="header-section">
                <h1>AI Admin Dashboard</h1>
                <p>Control, configure, and optimize your Field Recon AI system with ease</p>
                <!-- <p>Manage all AI-related settings from a single centralized dashboard. Adjust model configurations, fine-tune response behaviors, monitor performance, set usage limits, and customize AI integration for your organization. Designed for flexibility and control, this panel empowers admins to tailor the AI experience to meet operational, security, and compliance needs.</p> -->
            </div>
            <div class="accordion-container slds-m-top_medium">
                <lightning-accordion active-section-name={activeSectionName} allow-multiple-sections-open="true">
                    <lightning-accordion-section name="Gemini_Settings" label="Gemini API Settings">
                        <div class="gemini-field-section">
                            <div class="info-class slds-m-bottom_medium">
                                <h2 class="slds-text-heading_medium slds-grid slds-grid_vertical-align-end">
                                    <svg class="slds-m-right_x-small" width="28px" viewBox="0 0 24 24" fill="#5e5af9"><path d="M19.2488 6.87221C19.4896 6.63146 19.8367 6.52969 20.1693 6.60221C20.502 6.67474 20.775 6.91221 20.8937 7.23129C21.8179 9.71627 21.2828 12.6245 19.2827 14.6248C17.3074 16.6001 14.4472 17.1462 11.9817 16.269L7.96898 20.2817C6.7974 21.4533 4.89791 21.4533 3.72634 20.2817C2.55476 19.1101 2.55476 17.2106 3.72634 16.039L7.73903 12.0264C6.86184 9.56086 7.4079 6.70062 9.38319 4.72534C11.38 2.72875 14.2816 2.19203 16.7636 3.10949C17.0833 3.22767 17.3211 3.50092 17.3941 3.83386C17.4669 4.16665 17.3649 4.51341 17.1241 4.75434L14.768 7.11044C14.1825 7.69617 14.1825 8.64605 14.768 9.23176C15.3537 9.81746 16.3035 9.81728 16.8893 9.23176L19.2488 6.87221Z"></path></svg>
                                    Gemini API Settings
                                </h2>
                                <p class="slds-m-left_xx-small slds-m-top_x-small">Configure your Gemini API settings below. Ensure that you have the correct API key and endpoint URL to enable seamless integration with the Gemini AI services.</p>
                            </div>
                            <div class="input-section slds-grid slds-wrap slds-m-vertical_small">
                                <template for:each={geminiSettings} for:item="field">
                                    <template lwc:if={field.isTextarea}>
                                        <lightning-textarea class="slds-p-horizontal_xx-small slds-large-size_6-of-12 slds-size_12-of-12 slds-m-bottom_small" 
                                            key={field.name} label={field.label} name={field.name} value={field.value} 
                                            onchange={handleGeminiSettingUpdate} disabled={field.disabled}></lightning-textarea>
                                    </template>
                                    <template lwc:elseif={field.isPicklist}>
                                        <lightning-combobox class="slds-p-horizontal_x-small slds-large-size_6-of-12 slds-size_12-of-12 slds-m-bottom_small" 
                                            key={field.name} label={field.label} name={field.name} value={field.value} 
                                            options={field.options} onchange={handleGeminiSettingUpdate} disabled={field.disabled}>
                                        </lightning-combobox>
                                    </template>
                                    <template lwc:else>
                                        <lightning-input class="slds-p-horizontal_x-small slds-large-size_6-of-12 slds-size_12-of-12 slds-m-bottom_small" 
                                            type={field.type} key={field.name} label={field.label} name={field.name} value={field.value} 
                                            onchange={handleGeminiSettingUpdate} disabled={field.disabled}></lightning-input>
                                    </template>
                                </template>
                            </div>
                            <div class="btn-section slds-grid slds-grid_align-end">
                                <button class="slds-m-right_x-small save control-btn" onclick={saveGeminiSettings} disabled={disableSaveButton.cs}>
                                    <svg viewBox="0 0 24 24"><path d="M5 5V19H19V7.82843L16.1716 5H5ZM4 3H17L20.7071 6.70711C20.8946 6.89464 21 7.149 21 7.41421V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3ZM12 18C10.3431 18 9 16.6569 9 15C9 13.3431 10.3431 12 12 12C13.6569 12 15 13.3431 15 15C15 16.6569 13.6569 18 12 18ZM6 6H15V10H6V6Z"></path></svg>
                                    Save Settings
                                </button>
                                <button class="slds-m-right_x-small control-btn cancel" onclick={resetGeminiSettings} disabled={disableSaveButton.cs}>
                                    <svg viewBox="0 0 24 24"><path d="M2 12C2 17.5228 6.47715 22 12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2V4C16.4183 4 20 7.58172 20 12C20 16.4183 16.4183 20 12 20C7.58172 20 4 16.4183 4 12C4 9.25022 5.38734 6.82447 7.50024 5.38451L7.5 8H9.5V2L3.5 2V4L5.99918 3.99989C3.57075 5.82434 2 8.72873 2 12Z"></path></svg>
                                    Reset Settings
                                </button>
                            </div>
                        </div>
                        <hr class="hr-line" >
                    </lightning-accordion-section>
                     <lightning-accordion-section name="Prompt_Editor" label="Prompt Editor">
                        <div class="prompt-editor-section">
                            <c-prompt-editor></c-prompt-editor>
                            <!-- <c-ai-component-placeholder component-name="shiftEndLogV2" props={shiftEndLogV2Props}></c-ai-component-placeholder> -->
                        </div>
                        <hr class="hr-line" >
                     </lightning-accordion-section>
                </lightning-accordion>
            </div>
        </template>
    </div>
</template>